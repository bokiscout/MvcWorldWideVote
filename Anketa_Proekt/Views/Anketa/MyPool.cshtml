@model IEnumerable<Anketa_Proekt.Models.Anketa>

@{
    ViewBag.Title = "MyPool";
}
<head>
    <link href="~/myCSS/mypool.css" rel="stylesheet" />
</head>

<!-- title -->
<div class="container-flyid">
    <div class="content">

        <div class="title">
            <!-- title start here -->
            <div class="container">
                <!-- wrap image and title -->
                <img class="img-responsive titleImage" src="http://i.imgur.com/HYtxRj8.png" />
                <h1 class="text-center titleText">My Polls</h1>
            </div>
        </div>  <!-- class title end here -->
    </div>  <!-- class content end here -->
</div>  <!-- class container-flyid end here -->
<!--tile end here-->

<div class="container">
    <div class="well wellPools">
        <table class="table">
            <tr>
                <th class="tableHeaderNumber">
                    Number
                </th>
                <th class="tableHeaderQuestion">
                    Question
                </th>
                <th class="tableHeaderDescription">
                    Discription
                </th>
                <th class="tableHeaderBeginDate">
                    Begin Date
                </th>
                <th class="tableHeaderEndDate">
                    End Date
                </th>
                <th class="tableHeaderButtons">
                </th>
            </tr>
            @{
                int br = 0;
                foreach (var item in Model)
                {
                    br++;
                    string evenOrOdd = "";
                    <!-- all pools should obtain "questionnaireEven" Colors
                    if (br % 2 == 0)
                    {
                        evenOrOdd = "questionnaireEven";
                    }
                    else
                    {
                        evenOrOdd = "questionnaireOdd";
                    }
                    -->

                    <tr class="tableHeaderNumber">
                        <td>
                            @br
                        </td>
                        <td class="tableHeaderQuestion">
                            @Html.DisplayFor(modelItem => item.prasanje)
                        </td>
                        <td class="tableHeaderDescription">
                            @Html.DisplayFor(modelItem => item.opis_a)
                        </td>
                        <td class="tableHeaderBeginDate">
                            @Html.DisplayFor(modelItem => item.datum_kreiranje)
                        </td>
                        <td class="tableHeaderEndDate">
                            @Html.DisplayFor(modelItem => item.kraen_datum)
                        </td>
                        <td class="tableHeaderButtons">
                            <form method="POST" action="@Url.Action("DeleteConfirmed", "Anketa", new { id = item.id_anketa })" style="display:inline">
                                <button class="pull-right btn btn-sm btn-danger" type="button" data-toggle="modal" data-target="#confirmDelete" data-title="Delete Poll" data-message="Are you sure you want to delete this poll?">
                                    Delete
                                </button>
                            </form>
                            <a href="@Url.Action("Edit", "Anketa", new { id = item.id_anketa })">
                                <button type="submit" class="pull-right btn btn-sm btn-info">Edit</button>
                            </a>
                            <a href="@Url.Action("Details", "Anketa", new { id = item.id_anketa })">
                                <button type="submit" class="pull-right btn btn-sm btn-default">Details</button>
                            </a>
                        </td>
                    </tr>
                }
            }
        </table>

        <div>
            <a href="@Url.Action("Create", "Anketa", null)">
                <button type="submit" class="pull-right btn btn-sm btn-success">Create New</button>
            </a>
        </div>
    </div>
</div>

<!-- Modal Dialog -->
<div class="modal fade" id="confirmDelete" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Delete Parmanently</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure about this ?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirm">Delete</button>
            </div>
        </div>
    </div>
</div>

<!-- Dialog show event handler -->
<script type="text/javascript">
    $('#confirmDelete').on('show.bs.modal', function (e) {
        $message = $(e.relatedTarget).attr('data-message');
        $(this).find('.modal-body p').text($message);
        $title = $(e.relatedTarget).attr('data-title');
        $(this).find('.modal-title').text($title);

        // Pass form reference to modal for submission on yes/ok
        var form = $(e.relatedTarget).closest('form');
        $(this).find('.modal-footer #confirm').data('form', form);
    });

    //Form confirm (yes/ok) handler, submits form
    $('#confirmDelete').find('.modal-footer #confirm').on('click', function () {
        $(this).data('form').submit();
    });
</script>